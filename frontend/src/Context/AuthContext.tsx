import { createContext, useState, useEffect, useRef } from "react";
import type { ReactNode } from "react";
import type { User, AuthContextType, LanguageContent } from "../types";

export const AuthContext = createContext<AuthContextType | undefined>(undefined);

interface AuthContextProviderProps {
  children: ReactNode;
}

export function AuthContextProvider({ children }: AuthContextProviderProps): React.ReactElement {
    const [user, setUser] = useState<User | null>(null);
    const [token, setToken] = useState<string | null>(localStorage.getItem('token') || null);
    const [loading, setLoading] = useState<boolean>(true);
    const [lan, setLan] = useState<string>(localStorage.getItem('language') || 'en');
    
    const language: Record<string, LanguageContent> = {
    // English
    en: {
        Game: 'game',
        Profile: 'profile',
        FriendRequest: 'Friend Request',
        Settings: 'settings',
        Logout: 'logout',
        Searcher: 'Search players, matches...',

        // Notifications
        Notifications: 'Notifications',
        NotyClearAll: 'Clear all',
        NotyNoNewNotications: 'No new notifications',
        NotyYoureCaughtUp: 'You‚Äôre all caught up!',
        NotyViewAllNotications: 'View all notifications ‚Üí',
        NotyHasSendYouAFriendRequest: 'has sent you a friend request',
        secondsAgo: 'seconds ago',
        minutesAgo: 'minutes ago',
        hoursAgo: 'hours ago',
        daysAgo: 'days ago',
        weeksAgo: 'weeks ago',

        grettings: `Hi there ${user?.username || 'user1'}`,
        welcome: `Welcome to the time of your life!`,

        // Profile Section
        profileWelcome: 'My Profile',
        changeAvatar: 'Change Avatar',
        changePassword: 'Change Password',
        profileUsername: 'Username:',
        profileDisplayName: 'Display Name',
        profilePHDisplayName: 'Enter display name',
        profileEmail: 'Email:',
        profilePHEmail: 'Enter email',
        updateProfile: 'Update Profile',
        profileGameStatistics: 'Game Statistics',
        profileWins: 'Wins',
        profileLosses: 'Losses',
        profileWinRate: 'Win Rate',
        profileFriends: 'Friends',
        profilePHenterUsername: 'Enter Username',
        profileAddFriend: 'Add Friend',
        profileNoFriendsYet: 'No Friend Requests',
        profileIsOnline: 'Online',
        profileIsOffline: 'Offline',
        profileMatchHistory: 'Match History',
        profileNoMatchesYet: 'No matches yet',
        profileWinMatch: 'WIN',
        profileLossMatch: 'LOSS',
        profileScore: 'Score',

        // FriendRequest Section
        frAcceptFriend: 'Accept',
        frDeclineFriend: 'Decline',
        frNoFriendRequest: 'No Friend Requests',
        frNoFriendRequestMsg: "You don't have any friend requests at the moment.",
        frWantsToBeYourFriend: 'Wants to be your friend',

        // Matches
        matchesROOMSRUNNING: 'ROOMS RUNNING',
        matchesNoActiveRooms: 'No Active Rooms',
        matchesNoActiveRoomsMsg: 'There are currently no game rooms running. Be the first to create one!',
        matchesNoActiveRoomsAdvice: 'Start a new game to see it appear here',
        matchesAVAILABLE: 'AVAILABLE',
        matchesROOMFULL: 'ROOM FULL',
        matchesCannotJoin: 'Cannot join',
        matchesWaiting: 'Waiting...',
        matchesPlayer1: 'Player 1',
        matchesClickToJoin: 'Click to join',

        // Game
        gamePongGame: 'Pong Game',
        gameOponent: 'Oponent', // Added as requested
        gameOpponent: 'Opponent',
        gameStartGame: 'Start Game',
        gameRoomName: 'Room Name',
        gameEnterRoomName: 'Enter room name...',
        gameSelectDifficulty: 'Select Difficulty',
        gameEasy: 'Easy',
        gameMedium: 'Medium',
        gameHard: 'Hard',
        gameWaitingForOpponent: 'Waiting for opponent...',
        gameGetReadyToPlay: 'üéÆ Get ready to play!',
        gameCreateNewRoom: 'Create New Room',
        gameWaiting: 'waiting...',

        // Settings
        setSelectLanguage: 'Select Language',
        setCurrentLanguage: 'Current Language:'
    },

    // Portuguese
    pt: {
        Game: 'jogo',
        Profile: 'perfil',
        FriendRequest: 'Solicita√ß√£o de Amizade',
        Settings: 'configura√ß√µes',
        Logout: 'sair',
        Searcher: 'Pesquisar jogadores, partidas...',
        Notifications: 'Notifica√ß√µes',
        NotyClearAll: 'Limpar tudo',
        NotyNoNewNotications: 'Nenhuma notifica√ß√£o nova',
        NotyYoureCaughtUp: 'Voc√™ est√° atualizado!',
        NotyViewAllNotications: 'Ver todas as notifica√ß√µes ‚Üí',
        NotyHasSendYouAFriendRequest: 'enviou uma solicita√ß√£o de amizade',
        secondsAgo: 'segundos atr√°s',
        minutesAgo: 'minutos atr√°s',
        hoursAgo: 'horas atr√°s',
        daysAgo: 'dias atr√°s',
        weeksAgo: 'semanas atr√°s',

        grettings: `Ol√° ${user?.username || 'user1'}`,
        welcome: `Bem-vindo ao momento da sua vida!`,

        // Profile Section
        profileWelcome: 'Meu Perfil',
        changeAvatar: 'Alterar Avatar',
        changePassword: 'Alterar Senha',
        profileUsername: 'Nome de Usu√°rio:',
        profileDisplayName: 'Nome de Exibi√ß√£o',
        profilePHDisplayName: 'Digite o nome de exibi√ß√£o',
        profileEmail: 'E-mail:',
        profilePHEmail: 'Digite o e-mail',
        updateProfile: 'Atualizar Perfil',
        profileGameStatistics: 'Estat√≠sticas do Jogo',
        profileWins: 'Vit√≥rias',
        profileLosses: 'Derrotas',
        profileWinRate: 'Taxa de Vit√≥ria',
        profileFriends: 'Amigos',
        profilePHenterUsername: 'Digite o Nome de Usu√°rio',
        profileAddFriend: 'Adicionar Amigo',
        profileNoFriendsYet: 'Ainda sem amigos',
        profileIsOnline: 'Online',
        profileIsOffline: 'Offline',
        profileMatchHistory: 'Hist√≥rico de Partidas',
        profileNoMatchesYet: 'Ainda sem partidas',
        profileWinMatch: 'VIT√ìRIA',
        profileLossMatch: 'DERROTA',
        profileScore: 'Pontua√ß√£o',

        // FriendRequest Section
        frAcceptFriend: 'Aceitar',
        frDeclineFriend: 'Recusar',
        frNoFriendRequest: 'Nenhuma Solicita√ß√£o de Amizade',
        frNoFriendRequestMsg: 'Voc√™ n√£o tem solicita√ß√µes de amizade no momento.',
        frWantsToBeYourFriend: 'Quer ser seu amigo',

        // Matches
        matchesROOMSRUNNING: 'SALAS EM EXECU√á√ÉO',
        matchesNoActiveRooms: 'Nenhuma Sala Ativa',
        matchesNoActiveRoomsMsg: 'No momento, n√£o h√° salas de jogo em execu√ß√£o. Seja o primeiro a criar uma!',
        matchesNoActiveRoomsAdvice: 'Inicie um novo jogo para v√™-lo aparecer aqui',
        matchesAVAILABLE: 'DISPON√çVEL',
        matchesROOMFULL: 'SALA CHEIA',
        matchesCannotJoin: 'N√£o pode entrar',
        matchesWaiting: 'Aguardando...',
        matchesPlayer1: 'Jogador 1',
        matchesClickToJoin: 'Clique para entrar',

        // Game
        gamePongGame: 'Jogo Pong',
        gameOponent: 'Oponente', // Added (using correct Portuguese term, as "Oponent" is not a word)
        gameOpponent: 'Oponente',
        gameStartGame: 'Iniciar Jogo',
        gameRoomName: 'Nome da Sala',
        gameEnterRoomName: 'Digite o nome da sala...',
        gameSelectDifficulty: 'Selecionar Dificuldade',
        gameEasy: 'F√°cil',
        gameMedium: 'M√©dio',
        gameHard: 'Dif√≠cil',
        gameWaitingForOpponent: 'Aguardando oponente...',
        gameGetReadyToPlay: 'üéÆ Prepare-se para jogar!',
        gameCreateNewRoom: 'Criar Nova Sala',
        gameWaiting: 'aguardando...',

        // Settings
        setSelectLanguage: 'Selecionar Idioma',
        setCurrentLanguage: 'Idioma Atual:'
    },

    // French
    fr: {
        Game: 'jeu',
        Profile: 'profil',
        FriendRequest: 'Demande d\'ami',
        Settings: 'param√®tres',
        Logout: 'd√©connexion',
        Searcher: 'Rechercher des joueurs, des matchs...',
        Notifications: 'Notifications',
        NotyClearAll: 'Tout effacer',
        NotyNoNewNotications: 'Aucune nouvelle notification',
        NotyYoureCaughtUp: 'Vous √™tes √† jour !',
        NotyViewAllNotications: 'Voir toutes les notifications ‚Üí',
        NotyHasSendYouAFriendRequest: 'vous a envoy√© une demande d\'ami',
        secondsAgo: 'secondes auparavant',
        minutesAgo: 'minutes auparavant',
        hoursAgo: 'heures auparavant',
        daysAgo: 'jours auparavant',
        weeksAgo: 'semaines auparavant',

        grettings: `Bonjour ${user?.username || 'user1'}`,
        welcome: `Bienvenue au moment de votre vie !`,

        // Profile Section
        profileWelcome: 'Mon Profil',
        changeAvatar: 'Changer d\'avatar',
        changePassword: 'Changer le mot de passe',
        profileUsername: 'Nom d\'utilisateur :',
        profileDisplayName: 'Nom d\'affichage',
        profilePHDisplayName: 'Entrez le nom d\'affichage',
        profileEmail: 'E-mail :',
        profilePHEmail: 'Entrez l\'e-mail',
        updateProfile: 'Mettre √† jour le profil',
        profileGameStatistics: 'Statistiques de jeu',
        profileWins: 'Victoires',
        profileLosses: 'D√©faites',
        profileWinRate: 'Taux de victoire',
        profileFriends: 'Amis',
        profilePHenterUsername: 'Entrez le nom d\'utilisateur',
        profileAddFriend: 'Ajouter un ami',
        profileNoFriendsYet: 'Aucun ami pour l\'instant',
        profileIsOnline: 'En ligne',
        profileIsOffline: 'Hors ligne',
        profileMatchHistory: 'Historique des matchs',
        profileNoMatchesYet: 'Aucun match pour l\'instant',
        profileWinMatch: 'VICTOIRE',
        profileLossMatch: 'D√âFAITE',
        profileScore: 'Score',

        // FriendRequest Section
        frAcceptFriend: 'Accepter',
        frDeclineFriend: 'Refuser',
        frNoFriendRequest: 'Aucune demande d\'ami',
        frNoFriendRequestMsg: 'Vous n\'avez aucune demande d\'ami pour le moment.',
        frWantsToBeYourFriend: 'Veut √™tre votre ami',

        // Matches
        matchesROOMSRUNNING: 'SALLES EN COURS',
        matchesNoActiveRooms: 'Aucune salle active',
        matchesNoActiveRoomsMsg: 'Il n\'y a actuellement aucune salle de jeu en cours. Soyez le premier √† en cr√©er une !',
        matchesNoActiveRoomsAdvice: 'D√©marrez une nouvelle partie pour la voir appara√Ætre ici',
        matchesAVAILABLE: 'DISPONIBLE',
        matchesROOMFULL: 'SALLE PLEINE',
        matchesCannotJoin: 'Impossible de rejoindre',
        matchesWaiting: 'En attente...',
        matchesPlayer1: 'Joueur 1',
        matchesClickToJoin: 'Cliquez pour rejoindre',

        // Game
        gamePongGame: 'Jeu de Pong',
        gameOponent: 'Oposant', // Added (using French equivalent, acknowledging English misspelling)
        gameOpponent: 'Adversaire',
        gameStartGame: 'D√©marrer le jeu',
        gameRoomName: 'Nom de la salle',
        gameEnterRoomName: 'Entrez le nom de la salle...',
        gameSelectDifficulty: 'S√©lectionner la difficult√©',
        gameEasy: 'Facile',
        gameMedium: 'Moyen',
        gameHard: 'Difficile',
        gameWaitingForOpponent: 'En attente d\'un adversaire...',
        gameGetReadyToPlay: 'üéÆ Pr√©parez-vous √† jouer !',
        gameCreateNewRoom: 'Cr√©er une nouvelle salle',
        gameWaiting: 'en attente...',

        // Settings
        setSelectLanguage: 'S√©lectionner la langue',
        setCurrentLanguage: 'Langue actuelle :'
    },

    // Japanese
    ja: {
        Game: '„Ç≤„Éº„É†',
        Profile: '„Éó„É≠„Éï„Ç£„Éº„É´',
        FriendRequest: 'ÂèãÈÅî„É™„ÇØ„Ç®„Çπ„Éà',
        Settings: 'Ë®≠ÂÆö',
        Logout: '„É≠„Ç∞„Ç¢„Ç¶„Éà',
        Searcher: '„Éó„É¨„Ç§„É§„Éº„ÄÅ„Éû„ÉÉ„ÉÅ„ÇíÊ§úÁ¥¢...',
        Notifications: 'ÈÄöÁü•',
        NotyClearAll: '„Åô„Åπ„Å¶„ÇØ„É™„Ç¢',
        NotyNoNewNotications: 'Êñ∞„Åó„ÅÑÈÄöÁü•„ÅØ„ÅÇ„Çä„Åæ„Åõ„Çì',
        NotyYoureCaughtUp: '„Åô„Åπ„Å¶Á¢∫Ë™çÊ∏à„Åø„Åß„ÅôÔºÅ',
        NotyViewAllNotications: '„Åô„Åπ„Å¶„ÅÆÈÄöÁü•„ÇíË¶ã„Çã ‚Üí',
        NotyHasSendYouAFriendRequest: '„ÅåÂèãÈÅî„É™„ÇØ„Ç®„Çπ„Éà„ÇíÈÄÅ‰ø°„Åó„Åæ„Åó„Åü',
        secondsAgo: 'ÁßíÂâç',
        minutesAgo: 'ÂàÜÂâç',
        hoursAgo: 'ÊôÇÈñìÂâç',
        daysAgo: 'Êó•Ââç',
        weeksAgo: 'ÈÄ±ÈñìÂâç',

        grettings: `„Åì„Çì„Å´„Å°„ÅØ ${user?.username || 'user1'}`,
        welcome: `‰∫∫ÁîüÊúÄÈ´ò„ÅÆÊôÇÈñì„Å∏„Çà„ÅÜ„Åì„ÅùÔºÅ`,

        // Profile Section
        profileWelcome: '„Éû„Ç§„Éó„É≠„Éï„Ç£„Éº„É´',
        changeAvatar: '„Ç¢„Éê„Çø„Éº„ÇíÂ§âÊõ¥',
        changePassword: '„Éë„Çπ„ÉØ„Éº„Éâ„ÇíÂ§âÊõ¥',
        profileUsername: '„É¶„Éº„Ç∂„ÉºÂêçÔºö',
        profileDisplayName: 'Ë°®Á§∫Âêç',
        profilePHDisplayName: 'Ë°®Á§∫Âêç„ÇíÂÖ•Âäõ',
        profileEmail: '„É°„Éº„É´Ôºö',
        profilePHEmail: '„É°„Éº„É´„ÇíÂÖ•Âäõ',
        updateProfile: '„Éó„É≠„Éï„Ç£„Éº„É´„ÇíÊõ¥Êñ∞',
        profileGameStatistics: '„Ç≤„Éº„É†Áµ±Ë®à',
        profileWins: 'ÂãùÂà©',
        profileLosses: 'ÊïóÂåó',
        profileWinRate: 'ÂãùÁéá',
        profileFriends: 'ÂèãÈÅî',
        profilePHenterUsername: '„É¶„Éº„Ç∂„ÉºÂêç„ÇíÂÖ•Âäõ',
        profileAddFriend: 'ÂèãÈÅî„ÇíËøΩÂä†',
        profileNoFriendsYet: '„Åæ„Å†ÂèãÈÅî„Åå„ÅÑ„Åæ„Åõ„Çì',
        profileIsOnline: '„Ç™„É≥„É©„Ç§„É≥',
        profileIsOffline: '„Ç™„Éï„É©„Ç§„É≥',
        profileMatchHistory: '„Éû„ÉÉ„ÉÅÂ±•Ê≠¥',
        profileNoMatchesYet: '„Åæ„Å†„Éû„ÉÉ„ÉÅ„Åå„ÅÇ„Çä„Åæ„Åõ„Çì',
        profileWinMatch: 'ÂãùÂà©',
        profileLossMatch: 'ÊïóÂåó',
        profileScore: '„Çπ„Ç≥„Ç¢',

        // FriendRequest Section
        frAcceptFriend: 'Âèó„ÅëÂÖ•„Çå„Çã',
        frDeclineFriend: 'ÊãíÂê¶',
        frNoFriendRequest: 'ÂèãÈÅî„É™„ÇØ„Ç®„Çπ„Éà„Å™„Åó',
        frNoFriendRequestMsg: 'ÁèæÂú®„ÄÅÂèãÈÅî„É™„ÇØ„Ç®„Çπ„Éà„ÅØ„ÅÇ„Çä„Åæ„Åõ„Çì„ÄÇ',
        frWantsToBeYourFriend: '„ÅÇ„Å™„Åü„ÅÆÂèãÈÅî„Å´„Å™„Çä„Åü„ÅÑ',

        // Matches
        matchesROOMSRUNNING: 'ÂÆüË°å‰∏≠„ÅÆ„É´„Éº„É†',
        matchesNoActiveRooms: '„Ç¢„ÇØ„ÉÜ„Ç£„Éñ„Å™„É´„Éº„É†„Å™„Åó',
        matchesNoActiveRoomsMsg: 'ÁèæÂú®„ÄÅÂÆüË°å‰∏≠„ÅÆ„Ç≤„Éº„É†„É´„Éº„É†„ÅØ„ÅÇ„Çä„Åæ„Åõ„Çì„ÄÇÊúÄÂàù„Å´‰ΩúÊàê„Åó„Å¶„Åè„Å†„Åï„ÅÑÔºÅ',
        matchesNoActiveRoomsAdvice: 'Êñ∞„Åó„ÅÑ„Ç≤„Éº„É†„ÇíÈñãÂßã„Åó„Å¶„Åì„Åì„Å´Ë°®Á§∫',
        matchesAVAILABLE: 'Âà©Áî®ÂèØËÉΩ',
        matchesROOMFULL: '„É´„Éº„É†Ê∫ÄÂì°',
        matchesCannotJoin: 'ÂèÇÂä†„Åß„Åç„Åæ„Åõ„Çì',
        matchesWaiting: 'ÂæÖÊ©ü‰∏≠...',
        matchesPlayer1: '„Éó„É¨„Ç§„É§„Éº1',
        matchesClickToJoin: '„ÇØ„É™„ÉÉ„ÇØ„Åó„Å¶ÂèÇÂä†',

        // Game
        gamePongGame: '„Éù„É≥„Ç≤„Éº„É†',
        gameOponent: '„Ç™„Éù„Éç„É≥„Éà', // Added (using katakana for "Oponent" to reflect English misspelling)
        gameOpponent: 'ÂØæÊà¶Áõ∏Êâã',
        gameStartGame: '„Ç≤„Éº„É†ÈñãÂßã',
        gameRoomName: '„É´„Éº„É†Âêç',
        gameEnterRoomName: '„É´„Éº„É†Âêç„ÇíÂÖ•Âäõ...',
        gameSelectDifficulty: 'Èõ£ÊòìÂ∫¶„ÇíÈÅ∏Êäû',
        gameEasy: 'Á∞°Âçò',
        gameMedium: '‰∏≠Á¥ö',
        gameHard: 'Èõ£„Åó„ÅÑ',
        gameWaitingForOpponent: 'ÂØæÊà¶Áõ∏Êâã„ÇíÂæÖÊ©ü‰∏≠...',
        gameGetReadyToPlay: 'üéÆ „Éó„É¨„Ç§„ÅÆÊ∫ñÂÇô„ÇíÔºÅ',
        gameCreateNewRoom: 'Êñ∞„Åó„ÅÑ„É´„Éº„É†„Çí‰ΩúÊàê',
        gameWaiting: 'ÂæÖÊ©ü‰∏≠...',

        // Settings
        setSelectLanguage: 'Ë®ÄË™û„ÇíÈÅ∏Êäû',
        setCurrentLanguage: 'ÁèæÂú®„ÅÆË®ÄË™ûÔºö'
    },

    // Chinese (Simplified)
    zh: {
        Game: 'Ê∏∏Êàè',
        Profile: '‰∏™‰∫∫ËµÑÊñô',
        FriendRequest: 'Â•ΩÂèãËØ∑Ê±Ç',
        Settings: 'ËÆæÁΩÆ',
        Logout: 'ÈÄÄÂá∫',
        Searcher: 'ÊêúÁ¥¢Áé©ÂÆ∂„ÄÅÊØîËµõ...',
        Notifications: 'ÈÄöÁü•',
        NotyClearAll: 'ÂÖ®ÈÉ®Ê∏ÖÈô§',
        NotyNoNewNotications: 'Ê≤°ÊúâÊñ∞ÈÄöÁü•',
        NotyYoureCaughtUp: 'ÊÇ®Â∑≤ÂÖ®ÈÉ®Êü•ÁúãÔºÅ',
        NotyViewAllNotications: 'Êü•ÁúãÊâÄÊúâÈÄöÁü• ‚Üí',
        NotyHasSendYouAFriendRequest: 'ÂèëÈÄÅ‰∫ÜÂ•ΩÂèãËØ∑Ê±Ç',
        secondsAgo: 'ÁßíÂâç',
        minutesAgo: 'ÂàÜÈíüÂâç',
        hoursAgo: 'Â∞èÊó∂Ââç',
        daysAgo: 'Â§©Ââç',
        weeksAgo: 'Âë®Ââç',

        grettings: `‰Ω†Â•Ω ${user?.username || 'user1'}`,
        welcome: `Ê¨¢ËøéÊù•Âà∞‰Ω†ÁîüÂëΩ‰∏≠ÊúÄÁæéÂ•ΩÁöÑÊó∂ÂÖâÔºÅ`,

        // Profile Section
        profileWelcome: 'ÊàëÁöÑ‰∏™‰∫∫ËµÑÊñô',
        changeAvatar: 'Êõ¥ÊîπÂ§¥ÂÉè',
        changePassword: 'Êõ¥ÊîπÂØÜÁ†Å',
        profileUsername: 'Áî®Êà∑ÂêçÔºö',
        profileDisplayName: 'ÊòæÁ§∫ÂêçÁß∞',
        profilePHDisplayName: 'ËæìÂÖ•ÊòæÁ§∫ÂêçÁß∞',
        profileEmail: 'ÁîµÂ≠êÈÇÆ‰ª∂Ôºö',
        profilePHEmail: 'ËæìÂÖ•ÁîµÂ≠êÈÇÆ‰ª∂',
        updateProfile: 'Êõ¥Êñ∞‰∏™‰∫∫ËµÑÊñô',
        profileGameStatistics: 'Ê∏∏ÊàèÁªüËÆ°',
        profileWins: 'ËÉúÂà©',
        profileLosses: 'Â§±Ë¥•',
        profileWinRate: 'ËÉúÁéá',
        profileFriends: 'Â•ΩÂèã',
        profilePHenterUsername: 'ËæìÂÖ•Áî®Êà∑Âêç',
        profileAddFriend: 'Ê∑ªÂä†Â•ΩÂèã',
        profileNoFriendsYet: 'ÊöÇÊó†Â•ΩÂèã',
        profileIsOnline: 'Âú®Á∫ø',
        profileIsOffline: 'Á¶ªÁ∫ø',
        profileMatchHistory: 'ÊØîËµõÂéÜÂè≤',
        profileNoMatchesYet: 'ÊöÇÊó†ÊØîËµõ',
        profileWinMatch: 'ËÉúÂà©',
        profileLossMatch: 'Â§±Ë¥•',
        profileScore: 'ÂàÜÊï∞',

        // FriendRequest Section
        frAcceptFriend: 'Êé•Âèó',
        frDeclineFriend: 'ÊãíÁªù',
        frNoFriendRequest: 'Êó†Â•ΩÂèãËØ∑Ê±Ç',
        frNoFriendRequestMsg: 'ÊÇ®ÁõÆÂâçÊ≤°ÊúâÂ•ΩÂèãËØ∑Ê±Ç„ÄÇ',
        frWantsToBeYourFriend: 'ÊÉ≥Êàê‰∏∫ÊÇ®ÁöÑÂ•ΩÂèã',

        // Matches
        matchesROOMSRUNNING: 'Ê≠£Âú®ËøêË°åÁöÑÊàøÈó¥',
        matchesNoActiveRooms: 'Êó†Ê¥ªË∑ÉÊàøÈó¥',
        matchesNoActiveRoomsMsg: 'ÁõÆÂâçÊ≤°ÊúâÊ≠£Âú®ËøêË°åÁöÑÊ∏∏ÊàèÊàøÈó¥„ÄÇÊàê‰∏∫Á¨¨‰∏Ä‰∏™ÂàõÂª∫ÁöÑ‰∫∫ÂêßÔºÅ',
        matchesNoActiveRoomsAdvice: 'ÂºÄÂßãÊñ∞Ê∏∏Êàè‰ª•Âú®Ê≠§Â§ÑÊòæÁ§∫',
        matchesAVAILABLE: 'ÂèØÂä†ÂÖ•',
        matchesROOMFULL: 'ÊàøÈó¥Â∑≤Êª°',
        matchesCannotJoin: 'Êó†Ê≥ïÂä†ÂÖ•',
        matchesWaiting: 'Á≠âÂæÖ‰∏≠...',
        matchesPlayer1: 'Áé©ÂÆ∂1',
        matchesClickToJoin: 'ÁÇπÂáªÂä†ÂÖ•',

        // Game
        gamePongGame: '‰πí‰πìÊ∏∏Êàè',
        gameOponent: 'ÂØπÊâã', // Added (using standard term, as "Oponent" is not transliterated)
        gameOpponent: 'ÂØπÊâã',
        gameStartGame: 'ÂºÄÂßãÊ∏∏Êàè',
        gameRoomName: 'ÊàøÈó¥ÂêçÁß∞',
        gameEnterRoomName: 'ËæìÂÖ•ÊàøÈó¥ÂêçÁß∞...',
        gameSelectDifficulty: 'ÈÄâÊã©ÈöæÂ∫¶',
        gameEasy: 'ÁÆÄÂçï',
        gameMedium: '‰∏≠Á≠â',
        gameHard: 'Âõ∞Èöæ',
        gameWaitingForOpponent: 'Á≠âÂæÖÂØπÊâã...',
        gameGetReadyToPlay: 'üéÆ ÂáÜÂ§áÂ•ΩÁé©ÂêßÔºÅ',
        gameCreateNewRoom: 'ÂàõÂª∫Êñ∞ÊàøÈó¥',
        gameWaiting: 'Á≠âÂæÖ‰∏≠...',

        // Settings
        setSelectLanguage: 'ÈÄâÊã©ËØ≠Ë®Ä',
        setCurrentLanguage: 'ÂΩìÂâçËØ≠Ë®ÄÔºö'
    },

    // Spanish
    es: {
        Game: 'juego',
        Profile: 'perfil',
        FriendRequest: 'Solicitud de Amistad',
        Settings: 'configuraci√≥n',
        Logout: 'cerrar sesi√≥n',
        Searcher: 'Buscar jugadores, partidas...',
        Notifications: 'Notificaciones',
        NotyClearAll: 'Borrar todo',
        NotyNoNewNotications: 'No hay notificaciones nuevas',
        NotyYoureCaughtUp: '¬°Est√°s al d√≠a!',
        NotyViewAllNotications: 'Ver todas las notificaciones ‚Üí',
        NotyHasSendYouAFriendRequest: 'te ha enviado una solicitud de amistad',
        secondsAgo: 'segundos atr√°s',
        minutesAgo: 'minutos atr√°s',
        hoursAgo: 'horas atr√°s',
        daysAgo: 'd√≠as atr√°s',
        weeksAgo: 'semanas atr√°s',

        grettings: `Hola ${user?.username || 'user1'}`,
        welcome: `¬°Bienvenido al momento de tu vida!`,

        // Profile Section
        profileWelcome: 'Mi Perfil',
        changeAvatar: 'Cambiar Avatar',
        changePassword: 'Cambiar Contrase√±a',
        profileUsername: 'Nombre de Usuario:',
        profileDisplayName: 'Nombre de Visualizaci√≥n',
        profilePHDisplayName: 'Ingresa el nombre de visualizaci√≥n',
        profileEmail: 'Correo Electr√≥nico:',
        profilePHEmail: 'Ingresa el correo electr√≥nico',
        updateProfile: 'Actualizar Perfil',
        profileGameStatistics: 'Estad√≠sticas del Juego',
        profileWins: 'Victorias',
        profileLosses: 'Derrotas',
        profileWinRate: 'Tasa de Victorias',
        profileFriends: 'Amigos',
        profilePHenterUsername: 'Ingresa el Nombre de Usuario',
        profileAddFriend: 'Agregar Amigo',
        profileNoFriendsYet: 'A√∫n no tienes amigos',
        profileIsOnline: 'En l√≠nea',
        profileIsOffline: 'Desconectado',
        profileMatchHistory: 'Historial de Partidas',
        profileNoMatchesYet: 'A√∫n no hay partidas',
        profileWinMatch: 'VICTORIA',
        profileLossMatch: 'DERROTA',
        profileScore: 'Puntuaci√≥n',

        // FriendRequest Section
        frAcceptFriend: 'Aceptar',
        frDeclineFriend: 'Rechazar',
        frNoFriendRequest: 'No hay Solicitudes de Amistad',
        frNoFriendRequestMsg: 'No tienes solicitudes de amistad en este momento.',
        frWantsToBeYourFriend: 'Quiere ser tu amigo',

        // Matches
        matchesROOMSRUNNING: 'SALAS EN EJECUCI√ìN',
        matchesNoActiveRooms: 'No hay Salas Activas',
        matchesNoActiveRoomsMsg: 'Actualmente no hay salas de juego en ejecuci√≥n. ¬°S√© el primero en crear una!',
        matchesNoActiveRoomsAdvice: 'Inicia un nuevo juego para verlo aparecer aqu√≠',
        matchesAVAILABLE: 'DISPONIBLE',
        matchesROOMFULL: 'SALA LLENA',
        matchesCannotJoin: 'No se puede unir',
        matchesWaiting: 'Esperando...',
        matchesPlayer1: 'Jugador 1',
        matchesClickToJoin: 'Clic para unirte',

        // Game
        gamePongGame: 'Juego de Pong',
        gameOponent: 'Oponente', // Added (using correct Spanish term, as "Oponent" is not a word)
        gameOpponent: 'Oponente',
        gameStartGame: 'Iniciar Juego',
        gameRoomName: 'Nombre de la Sala',
        gameEnterRoomName: 'Ingresa el nombre de la sala...',
        gameSelectDifficulty: 'Seleccionar Dificultad',
        gameEasy: 'F√°cil',
        gameMedium: 'Medio',
        gameHard: 'Dif√≠cil',
        gameWaitingForOpponent: 'Esperando oponente...',
        gameGetReadyToPlay: 'üéÆ ¬°Prep√°rate para jugar!',
        gameCreateNewRoom: 'Crear Nueva Sala',
        gameWaiting: 'esperando...',

        // Settings
        setSelectLanguage: 'Seleccionar Idioma',
        setCurrentLanguage: 'Idioma Actual:'
    },

    // Russian
    ru: {
        Game: '–∏–≥—Ä–∞',
        Profile: '–ø—Ä–æ—Ñ–∏–ª—å',
        FriendRequest: '–ó–∞–ø—Ä–æ—Å –Ω–∞ –¥—Ä—É–∂–±—É',
        Settings: '–Ω–∞—Å—Ç—Ä–æ–π–∫–∏',
        Logout: '–≤—ã–π—Ç–∏',
        Searcher: '–ü–æ–∏—Å–∫ –∏–≥—Ä–æ–∫–æ–≤, –º–∞—Ç—á–µ–π...',

        // Notifications
        Notifications: '–£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è',
        NotyClearAll: '–û—á–∏—Å—Ç–∏—Ç—å –≤—Å–µ',
        NotyNoNewNotications: '–ù–µ—Ç –Ω–æ–≤—ã—Ö —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π',
        NotyYoureCaughtUp: '–í—ã –≤ –∫—É—Ä—Å–µ –≤—Å–µ—Ö —Å–æ–±—ã—Ç–∏–π!',
        NotyViewAllNotications: '–ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –≤—Å–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è ‚Üí',
        NotyHasSendYouAFriendRequest: '–æ—Ç–ø—Ä–∞–≤–∏–ª –≤–∞–º –∑–∞–ø—Ä–æ—Å –Ω–∞ –¥—Ä—É–∂–±—É',
        secondsAgo: '—Å–µ–∫—É–Ω–¥ –Ω–∞–∑–∞–¥',
        minutesAgo: '–º–∏–Ω—É—Ç –Ω–∞–∑–∞–¥',
        hoursAgo: '—á–∞—Å–æ–≤ –Ω–∞–∑–∞–¥',
        daysAgo: '–¥–Ω–µ–π –Ω–∞–∑–∞–¥',
        weeksAgo: '–Ω–µ–¥–µ–ª—å –Ω–∞–∑–∞–¥',

        grettings: `–ü—Ä–∏–≤–µ—Ç ${user?.username || 'user1'}`,
        welcome: `–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ –ª—É—á—à–µ–µ –≤—Ä–µ–º—è –≤–∞—à–µ–π –∂–∏–∑–Ω–∏!`,

        // Profile Section
        profileWelcome: '–ú–æ–π –ø—Ä–æ—Ñ–∏–ª—å',
        changeAvatar: '–°–º–µ–Ω–∏—Ç—å –∞–≤–∞—Ç–∞—Ä',
        changePassword: '–°–º–µ–Ω–∏—Ç—å –ø–∞—Ä–æ–ª—å',
        profileUsername: '–ò–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:',
        profileDisplayName: '–û—Ç–æ–±—Ä–∞–∂–∞–µ–º–æ–µ –∏–º—è',
        profilePHDisplayName: '–í–≤–µ–¥–∏—Ç–µ –æ—Ç–æ–±—Ä–∞–∂–∞–µ–º–æ–µ –∏–º—è',
        profileEmail: '–≠–ª–µ–∫—Ç—Ä–æ–Ω–Ω–∞—è –ø–æ—á—Ç–∞:',
        profilePHEmail: '–í–≤–µ–¥–∏—Ç–µ —ç–ª–µ–∫—Ç—Ä–æ–Ω–Ω—É—é –ø–æ—á—Ç—É',
        updateProfile: '–û–±–Ω–æ–≤–∏—Ç—å –ø—Ä–æ—Ñ–∏–ª—å',
        profileGameStatistics: '–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∏–≥—Ä',
        profileWins: '–ü–æ–±–µ–¥—ã',
        profileLosses: '–ü–æ—Ä–∞–∂–µ–Ω–∏—è',
        profileWinRate: '–ü—Ä–æ—Ü–µ–Ω—Ç –ø–æ–±–µ–¥',
        profileFriends: '–î—Ä—É–∑—å—è',
        profilePHenterUsername: '–í–≤–µ–¥–∏—Ç–µ –∏–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è',
        profileAddFriend: '–î–æ–±–∞–≤–∏—Ç—å –¥—Ä—É–≥–∞',
        profileNoFriendsYet: '–ü–æ–∫–∞ –Ω–µ—Ç –¥—Ä—É–∑–µ–π',
        profileIsOnline: '–í —Å–µ—Ç–∏',
        profileIsOffline: '–ù–µ –≤ —Å–µ—Ç–∏',
        profileMatchHistory: '–ò—Å—Ç–æ—Ä–∏—è –º–∞—Ç—á–µ–π',
        profileNoMatchesYet: '–ü–æ–∫–∞ –Ω–µ—Ç –º–∞—Ç—á–µ–π',
        profileWinMatch: '–ü–û–ë–ï–î–ê',
        profileLossMatch: '–ü–û–†–ê–ñ–ï–ù–ò–ï',
        profileScore: '–°—á—ë—Ç',

        // FriendRequest Section
        frAcceptFriend: '–ü—Ä–∏–Ω—è—Ç—å',
        frDeclineFriend: '–û—Ç–∫–ª–æ–Ω–∏—Ç—å',
        frNoFriendRequest: '–ù–µ—Ç –∑–∞–ø—Ä–æ—Å–æ–≤ –Ω–∞ –¥—Ä—É–∂–±—É',
        frNoFriendRequestMsg: '–ù–∞ –¥–∞–Ω–Ω—ã–π –º–æ–º–µ–Ω—Ç —É –≤–∞—Å –Ω–µ—Ç –∑–∞–ø—Ä–æ—Å–æ–≤ –Ω–∞ –¥—Ä—É–∂–±—É.',
        frWantsToBeYourFriend: '–•–æ—á–µ—Ç —Å—Ç–∞—Ç—å –≤–∞—à–∏–º –¥—Ä—É–≥–æ–º',

        // Matches
        matchesROOMSRUNNING: '–ê–ö–¢–ò–í–ù–´–ï –ö–û–ú–ù–ê–¢–´',
        matchesNoActiveRooms: '–ù–µ—Ç –∞–∫—Ç–∏–≤–Ω—ã—Ö –∫–æ–º–Ω–∞—Ç',
        matchesNoActiveRoomsMsg: '–í –Ω–∞—Å—Ç–æ—è—â–µ–µ –≤—Ä–µ–º—è –Ω–µ—Ç –∞–∫—Ç–∏–≤–Ω—ã—Ö –∏–≥—Ä–æ–≤—ã—Ö –∫–æ–º–Ω–∞—Ç. –°—Ç–∞–Ω—å—Ç–µ –ø–µ—Ä–≤—ã–º, –∫—Ç–æ —Å–æ–∑–¥–∞—Å—Ç –æ–¥–Ω—É!',
        matchesNoActiveRoomsAdvice: '–ù–∞—á–Ω–∏—Ç–µ –Ω–æ–≤—É—é –∏–≥—Ä—É, —á—Ç–æ–±—ã –æ–Ω–∞ –ø–æ—è–≤–∏–ª–∞—Å—å –∑–¥–µ—Å—å',
        matchesAVAILABLE: '–î–û–°–¢–£–ü–ù–û',
        matchesROOMFULL: '–ö–û–ú–ù–ê–¢–ê –ü–û–õ–ù–ê',
        matchesCannotJoin: '–ù–µ–≤–æ–∑–º–æ–∂–Ω–æ –ø—Ä–∏—Å–æ–µ–¥–∏–Ω–∏—Ç—å—Å—è',
        matchesWaiting: '–û–∂–∏–¥–∞–Ω–∏–µ...',
        matchesPlayer1: '–ò–≥—Ä–æ–∫ 1',
        matchesClickToJoin: '–ù–∞–∂–º–∏—Ç–µ, —á—Ç–æ–±—ã –ø—Ä–∏—Å–æ–µ–¥–∏–Ω–∏—Ç—å—Å—è',

        // Game
        gamePongGame: '–ò–≥—Ä–∞ –≤ –ø–∏–Ω–≥-–ø–æ–Ω–≥',
        gameOponent: '–û–ø–ø–æ–Ω–µ–Ω—Ç', // Added (using Russian transliteration for "Oponent")
        gameOpponent: '–ü—Ä–æ—Ç–∏–≤–Ω–∏–∫',
        gameStartGame: '–ù–∞—á–∞—Ç—å –∏–≥—Ä—É',
        gameRoomName: '–ù–∞–∑–≤–∞–Ω–∏–µ –∫–æ–º–Ω–∞—Ç—ã',
        gameEnterRoomName: '–í–≤–µ–¥–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ –∫–æ–º–Ω–∞—Ç—ã...',
        gameSelectDifficulty: '–í—ã–±–µ—Ä–∏—Ç–µ —Å–ª–æ–∂–Ω–æ—Å—Ç—å',
        gameEasy: '–õ—ë–≥–∫–∏–π',
        gameMedium: '–°—Ä–µ–¥–Ω–∏–π',
        gameHard: '–°–ª–æ–∂–Ω—ã–π',
        gameWaitingForOpponent: '–û–∂–∏–¥–∞–Ω–∏–µ –ø—Ä–æ—Ç–∏–≤–Ω–∏–∫–∞...',
        gameGetReadyToPlay: 'üéÆ –ü—Ä–∏–≥–æ—Ç–æ–≤—å—Ç–µ—Å—å –∫ –∏–≥—Ä–µ!',
        gameCreateNewRoom: '–°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—É—é –∫–æ–º–Ω–∞—Ç—É',
        gameWaiting: '–æ–∂–∏–¥–∞–Ω–∏–µ...',

        // Settings
        setSelectLanguage: '–í—ã–±—Ä–∞—Ç—å —è–∑—ã–∫',
        setCurrentLanguage: '–¢–µ–∫—É—â–∏–π —è–∑—ã–∫:'
    },

    // Arabic
    ar: {
        Game: 'ŸÑÿπÿ®ÿ©',
        Profile: 'ÿßŸÑŸÖŸÑŸÅ ÿßŸÑÿ¥ÿÆÿµŸä',
        FriendRequest: 'ÿ∑ŸÑÿ® ÿµÿØÿßŸÇÿ©',
        Settings: 'ÿßŸÑÿ•ÿπÿØÿßÿØÿßÿ™',
        Logout: 'ÿ™ÿ≥ÿ¨ŸäŸÑ ÿßŸÑÿÆÿ±Ÿàÿ¨',
        Searcher: 'ÿßŸÑÿ®ÿ≠ÿ´ ÿπŸÜ ŸÑÿßÿπÿ®ŸäŸÜÿå ŸÖÿ®ÿßÿ±Ÿäÿßÿ™...',
        Notifications: 'ÿßŸÑÿ•ÿ¥ÿπÿßÿ±ÿßÿ™',
        NotyClearAll: 'ŸÖÿ≥ÿ≠ ÿßŸÑŸÉŸÑ',
        NotyNoNewNotications: 'ŸÑÿß ÿ™Ÿàÿ¨ÿØ ÿ•ÿ¥ÿπÿßÿ±ÿßÿ™ ÿ¨ÿØŸäÿØÿ©',
        NotyYoureCaughtUp: 'ÿ£ŸÜÿ™ ŸÖÿ≠ÿØÿ´ ÿ®ÿßŸÑŸÉÿßŸÖŸÑ!',
        NotyViewAllNotications: 'ÿπÿ±ÿ∂ ŸÉŸÑ ÿßŸÑÿ•ÿ¥ÿπÿßÿ±ÿßÿ™ ‚Üí',
        NotyHasSendYouAFriendRequest: 'ÿ£ÿ±ÿ≥ŸÑ ŸÑŸÉ ÿ∑ŸÑÿ® ÿµÿØÿßŸÇÿ©',
        secondsAgo: 'ÿ´ŸàÿßŸÜŸç ŸÖÿ∂ÿ™',
        minutesAgo: 'ÿØŸÇÿßÿ¶ŸÇ ŸÖÿ∂ÿ™',
        hoursAgo: 'ÿ≥ÿßÿπÿßÿ™ ŸÖÿ∂ÿ™',
        daysAgo: 'ÿ£ŸäÿßŸÖ ŸÖÿ∂ÿ™',
        weeksAgo: 'ÿ£ÿ≥ÿßÿ®Ÿäÿπ ŸÖÿ∂ÿ™',

        grettings: `ŸÖÿ±ÿ≠ÿ®Ÿãÿß ${user?.username || 'user1'}`,
        welcome: `ŸÖÿ±ÿ≠ÿ®Ÿãÿß ÿ®ŸÉ ŸÅŸä ÿ£ŸÅÿ∂ŸÑ ŸÑÿ≠ÿ∏ÿßÿ™ ÿ≠Ÿäÿßÿ™ŸÉ!`,

        // Profile Section
        profileWelcome: 'ŸÖŸÑŸÅŸä ÿßŸÑÿ¥ÿÆÿµŸä',
        changeAvatar: 'ÿ™ÿ∫ŸäŸäÿ± ÿßŸÑÿµŸàÿ±ÿ© ÿßŸÑÿ±ŸÖÿ≤Ÿäÿ©',
        changePassword: 'ÿ™ÿ∫ŸäŸäÿ± ŸÉŸÑŸÖÿ© ÿßŸÑŸÖÿ±Ÿàÿ±',
        profileUsername: 'ÿßÿ≥ŸÖ ÿßŸÑŸÖÿ≥ÿ™ÿÆÿØŸÖ:',
        profileDisplayName: 'ÿßÿ≥ŸÖ ÿßŸÑÿπÿ±ÿ∂',
        profilePHDisplayName: 'ÿ£ÿØÿÆŸÑ ÿßÿ≥ŸÖ ÿßŸÑÿπÿ±ÿ∂',
        profileEmail: 'ÿßŸÑÿ®ÿ±ŸäÿØ ÿßŸÑÿ•ŸÑŸÉÿ™ÿ±ŸàŸÜŸä:',
        profilePHEmail: 'ÿ£ÿØÿÆŸÑ ÿßŸÑÿ®ÿ±ŸäÿØ ÿßŸÑÿ•ŸÑŸÉÿ™ÿ±ŸàŸÜŸä',
        updateProfile: 'ÿ™ÿ≠ÿØŸäÿ´ ÿßŸÑŸÖŸÑŸÅ ÿßŸÑÿ¥ÿÆÿµŸä',
        profileGameStatistics: 'ÿ•ÿ≠ÿµÿßÿ¶Ÿäÿßÿ™ ÿßŸÑŸÑÿπÿ®ÿ©',
        profileWins: 'ÿßŸÑÿßŸÜÿ™ÿµÿßÿ±ÿßÿ™',
        profileLosses: 'ÿßŸÑŸáÿ≤ÿßÿ¶ŸÖ',
        profileWinRate: 'ŸÜÿ≥ÿ®ÿ© ÿßŸÑŸÅŸàÿ≤',
        profileFriends: 'ÿßŸÑÿ£ÿµÿØŸÇÿßÿ°',
        profilePHenterUsername: 'ÿ£ÿØÿÆŸÑ ÿßÿ≥ŸÖ ÿßŸÑŸÖÿ≥ÿ™ÿÆÿØŸÖ',
        profileAddFriend: 'ÿ•ÿ∂ÿßŸÅÿ© ÿµÿØŸäŸÇ',
        profileNoFriendsYet: 'ŸÑÿß ÿ™Ÿàÿ¨ÿØ ÿ∑ŸÑÿ®ÿßÿ™ ÿµÿØÿßŸÇÿ© ÿ®ÿπÿØ',
        profileIsOnline: 'ŸÖÿ™ÿµŸÑ',
        profileIsOffline: 'ÿ∫Ÿäÿ± ŸÖÿ™ÿµŸÑ',
        profileMatchHistory: 'ÿ™ÿßÿ±ŸäÿÆ ÿßŸÑŸÖÿ®ÿßÿ±Ÿäÿßÿ™',
        profileNoMatchesYet: 'ŸÑÿß ÿ™Ÿàÿ¨ÿØ ŸÖÿ®ÿßÿ±Ÿäÿßÿ™ ÿ®ÿπÿØ',
        profileWinMatch: 'ŸÅŸàÿ≤',
        profileLossMatch: 'ÿÆÿ≥ÿßÿ±ÿ©',
        profileScore: 'ÿßŸÑŸÜÿ™Ÿäÿ¨ÿ©',

        // FriendRequest Section
        frAcceptFriend: 'ŸÇÿ®ŸàŸÑ',
        frDeclineFriend: 'ÿ±ŸÅÿ∂',
        frNoFriendRequest: 'ŸÑÿß ÿ™Ÿàÿ¨ÿØ ÿ∑ŸÑÿ®ÿßÿ™ ÿµÿØÿßŸÇÿ©',
        frNoFriendRequestMsg: 'ŸÑŸäÿ≥ ŸÑÿØŸäŸÉ ÿ£Ÿä ÿ∑ŸÑÿ®ÿßÿ™ ÿµÿØÿßŸÇÿ© ŸÅŸä ÿßŸÑŸàŸÇÿ™ ÿßŸÑÿ≠ÿßŸÑŸä.',
        frWantsToBeYourFriend: 'Ÿäÿ±ŸäÿØ ÿ£ŸÜ ŸäŸÉŸàŸÜ ÿµÿØŸäŸÇŸÉ',

        // Matches
        matchesROOMSRUNNING: 'ÿßŸÑÿ∫ÿ±ŸÅ ÿßŸÑÿ¨ÿßÿ±Ÿäÿ©',
        matchesNoActiveRooms: 'ŸÑÿß ÿ™Ÿàÿ¨ÿØ ÿ∫ÿ±ŸÅ ŸÜÿ¥ÿ∑ÿ©',
        matchesNoActiveRoomsMsg: 'ŸÑÿß ÿ™Ÿàÿ¨ÿØ ÿ∫ÿ±ŸÅ ÿ£ŸÑÿπÿßÿ® ÿ¨ÿßÿ±Ÿäÿ© ÿ≠ÿßŸÑŸäŸãÿß. ŸÉŸÜ ÿ£ŸàŸÑ ŸÖŸÜ ŸäŸÜÿ¥ÿ¶ Ÿàÿßÿ≠ÿØÿ©!',
        matchesNoActiveRoomsAdvice: 'ÿßÿ®ÿØÿ£ ŸÑÿπÿ®ÿ© ÿ¨ÿØŸäÿØÿ© ŸÑÿ™ÿ∏Ÿáÿ± ŸáŸÜÿß',
        matchesAVAILABLE: 'ŸÖÿ™ÿßÿ≠',
        matchesROOMFULL: 'ÿßŸÑÿ∫ÿ±ŸÅÿ© ŸÖŸÖÿ™ŸÑÿ¶ÿ©',
        matchesCannotJoin: 'ŸÑÿß ŸäŸÖŸÉŸÜ ÿßŸÑÿßŸÜÿ∂ŸÖÿßŸÖ',
        matchesWaiting: 'ŸÅŸä ÿßŸÑÿßŸÜÿ™ÿ∏ÿßÿ±...',
        matchesPlayer1: 'ÿßŸÑŸÑÿßÿπÿ® 1',
        matchesClickToJoin: 'ÿßŸÜŸÇÿ± ŸÑŸÑÿßŸÜÿ∂ŸÖÿßŸÖ',

        // Game
        gamePongGame: 'ŸÑÿπÿ®ÿ© ÿ®ŸàŸÜÿ∫',
        gameOponent: 'ÿÆÿµŸÖ', // Added (using standard Arabic term, as "Oponent" is not transliterated)
        gameOpponent: 'ÿßŸÑÿÆÿµŸÖ',
        gameStartGame: 'ÿ®ÿØÿ° ÿßŸÑŸÑÿπÿ®ÿ©',
        gameRoomName: 'ÿßÿ≥ŸÖ ÿßŸÑÿ∫ÿ±ŸÅÿ©',
        gameEnterRoomName: 'ÿ£ÿØÿÆŸÑ ÿßÿ≥ŸÖ ÿßŸÑÿ∫ÿ±ŸÅÿ©...',
        gameSelectDifficulty: 'ÿßÿÆÿ™ÿ± ŸÖÿ≥ÿ™ŸàŸâ ÿßŸÑÿµÿπŸàÿ®ÿ©',
        gameEasy: 'ÿ≥ŸáŸÑ',
        gameMedium: 'ŸÖÿ™Ÿàÿ≥ÿ∑',
        gameHard: 'ÿµÿπÿ®',
        gameWaitingForOpponent: 'ŸÅŸä ÿßŸÜÿ™ÿ∏ÿßÿ± ÿßŸÑÿÆÿµŸÖ...',
        gameGetReadyToPlay: 'üéÆ ÿßÿ≥ÿ™ÿπÿØ ŸÑŸÑÿπÿ®!',
        gameCreateNewRoom: 'ÿ•ŸÜÿ¥ÿßÿ° ÿ∫ÿ±ŸÅÿ© ÿ¨ÿØŸäÿØÿ©',
        gameWaiting: 'ŸÅŸä ÿßŸÑÿßŸÜÿ™ÿ∏ÿßÿ±...',

        // Settings
        setSelectLanguage: 'ÿßÿÆÿ™ÿ± ÿßŸÑŸÑÿ∫ÿ©',
        setCurrentLanguage: 'ÿßŸÑŸÑÿ∫ÿ© ÿßŸÑÿ≠ÿßŸÑŸäÿ©:'
    }
}

    const socketRef = useRef<any>(null);

    // Check authentication
    useEffect(() => {
        const checkAuth = async (): Promise<void> => {
            if (!token) {
                setUser(null);
                setLoading(false);
                console.log("You are not allow!")
                return ;
            }
            
            setLoading(true); // A√ëADIR: Asegurar que loading est√° activo cuando verificamos
            
            try {
                const res = await fetch('http://localhost:3000/api/auth/me', {
                    headers: {'Authorization': `Bearer ${token}`}
                })
                if (res.ok) {
                    const data = await res.json();
                    setUser(data.user)
                } else {
                    console.log("token is invalid");
                    localStorage.removeItem('token');
                    setToken(null);
                    setUser(null);
                }

            } catch {
                console.log("token is invalid");
                localStorage.removeItem('token');
                setToken(null);
                setUser(null);
            } finally {
                setLoading(false)
            }

        }
        checkAuth();
    }, [token])

    // Login function - CORREGIR PARA RESETEAR ESTADO
    const login = (newToken: string): void => {
        setLoading(true); // A√ëADIR: Activar loading al hacer login
        localStorage.setItem('token', newToken);
        setToken(newToken);
    };

    // Logout function - CORREGIR PARA RESETEAR ESTADO COMPLETAMENTE
    const logout = (): void => {
        setLoading(true); // A√ëADIR: Activar loading al hacer logout
        localStorage.removeItem('token');
        setToken(null);
        setUser(null);
        // No setear loading(false) aqu√≠ - lo har√° el useEffect cuando token sea null
    };

    // Set language function
    const setLanguage = (newLan: string): void => {
        setLan(newLan);
        localStorage.setItem('language', newLan);
    };

    const contextValue: AuthContextType = {
        user, 
        setUser, 
        token, 
        setToken, 
        loading, 
        setLoading,
        language,
        lan,
        setLan,
        login,
        logout,
        setLanguage
    };

    return (
        <AuthContext.Provider value={contextValue}>
            {children}
        </AuthContext.Provider>
    )
}
