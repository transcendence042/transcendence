import type {ErrorNoParams, Vocabulary} from "ajv/lib/types"
import additionalItems, {AdditionalItemsError} from "ajv/lib/vocabularies/applicator/additionalItems"
import prefixItems from "ajv/lib/vocabularies/applicator/prefixItems"
import items from "ajv/lib/vocabularies/applicator/items"
import items2020, {ItemsError} from "ajv/lib/vocabularies/applicator/items2020"
import contains, {ContainsError} from "ajv/lib/vocabularies/applicator/contains"
import dependencies, {DependenciesError} from "ajv/lib/vocabularies/applicator/dependencies"
import propertyNames, {PropertyNamesError} from "ajv/lib/vocabularies/applicator/propertyNames"
import additionalProperties, {AdditionalPropertiesError} from "ajv/lib/vocabularies/applicator/additionalProperties"
import properties from "ajv/lib/vocabularies/applicator/properties"
import patternProperties from "ajv/lib/vocabularies/applicator/patternProperties"
import notKeyword, {NotKeywordError} from "ajv/lib/vocabularies/applicator/not"
import anyOf, {AnyOfError} from "ajv/lib/vocabularies/applicator/anyOf"
import oneOf, {OneOfError} from "ajv/lib/vocabularies/applicator/oneOf"
import allOf from "ajv/lib/vocabularies/applicator/allOf"
import ifKeyword, {IfKeywordError} from "ajv/lib/vocabularies/applicator/if"
import thenElse from "ajv/lib/vocabularies/applicator/thenElse"

export default function getApplicator(draft2020 = false): Vocabulary {
  const applicator = [
    // any
    notKeyword,
    anyOf,
    oneOf,
    allOf,
    ifKeyword,
    thenElse,
    // object
    propertyNames,
    additionalProperties,
    dependencies,
    properties,
    patternProperties,
  ]
  // array
  if (draft2020) applicator.push(prefixItems, items2020)
  else applicator.push(additionalItems, items)
  applicator.push(contains)
  return applicator
}

export type ApplicatorKeywordError =
  | ErrorNoParams<"false schema">
  | AdditionalItemsError
  | ItemsError
  | ContainsError
  | AdditionalPropertiesError
  | DependenciesError
  | IfKeywordError
  | AnyOfError
  | OneOfError
  | NotKeywordError
  | PropertyNamesError
